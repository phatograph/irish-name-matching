<div class="jumbotron hide">
<h2>Irish Name Matching</h2>
<p>
This project is to provide a web service that encodes several of these methods
(particularly Soundex,Irish-Soundex, Matheson's-classiification and string-matching)
and produces matches for names between two lists, returning the paired index values
of matching names according to the specified method.
</p>
</div>
<%= form_tag match_path, :multipart => true do %>
  <div class="row">
    <div class="col-xs-6">
      <div class="form-group">
        <%= label_tag 'input1', 'Input 1 (separated by newline)' %>
        <%= text_area_tag 'input1', params[:input1], :class => 'form-control', :rows => 5 %>
      </div>
      <div class="form-group">
        <%= label_tag 'file1', 'Or upload a file' %>
        <%= file_field_tag "file1" %>
        <%= @file_content %>
      </div>
    </div>
    <div class="col-xs-6">
      <div class="form-group">
        <%= label_tag 'input2', 'Input 2 (separated by newline)' %>
        <%= text_area_tag 'input2', params[:input2], :class => 'form-control', :rows => 5 %>
      </div>
      <div class="form-group">
        <%= label_tag 'file2', 'Or upload a file' %>
        <%= file_field_tag "file2" %>
        <%= @file_content %>
      </div>
    </div>
  </div>
  <div class="form-group text-center">
    <div class="form-inline">
      <!-- <select class="form&#45;control" name="matching_method"> -->
      <!--   <option>Simple</option> -->
      <!-- </select> -->
      <input class="btn btn-primary" type="submit" value="Submit" />
    </div>
  </div>
<% end %>
<% if @matched_names.present? %>
  <% @matched_names.each do |matched_name| %>
    <div class="panel panel-default">
      <div class="panel-body">
        <h4><%= matched_name.name %></h4>
        <p>Soundex: <%= matched_name.soundex %></p>
        <!-- <h5><%= matched_name.matching_method %></h5> -->
        <div class="row">
          <% matched_name.to_match_names.each do |tmn| %>
            <div class="col-xs-3">
              <div class="panel panel-default">
                <div class="panel-body">
                  <h5><%= tmn.name %> <small>(<%= tmn.score %>)</small></h5>
                  <% tmn.scores.each do |s| %>
                    <p><%= s.class.name %> = <%= s.value %> (score = <%= s.get_score %>)</p>
                  <% end %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
<% end %>
